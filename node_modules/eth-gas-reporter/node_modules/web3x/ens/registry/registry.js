"use strict";
/*
  This file is part of web3x.

  web3x is free software: you can redistribute it and/or modify
  it under the terms of the GNU Lesser General Public License as published by
  the Free Software Foundation, either version 3 of the License, or
  (at your option) any later version.

  web3x is distributed in the hope that it will be useful,
  but WITHOUT ANY WARRANTY; without even the implied warranty of
  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  GNU Lesser General Public License for more details.

  You should have received a copy of the GNU Lesser General Public License
  along with web3x.  If not, see <http://www.gnu.org/licenses/>.
*/
Object.defineProperty(exports, "__esModule", { value: true });
const tslib_1 = require("tslib");
const namehash_1 = require("./namehash");
const EnsRegistry_1 = require("../contracts/EnsRegistry");
const EnsResolver_1 = require("../contracts/EnsResolver");
/**
 * A wrapper around the ENS registry contract.
 *
 * @method Registry
 * @param {Ens} ens
 * @constructor
 */
class Registry {
    constructor(ens) {
        this.ens = ens;
        this.contract = ens.checkNetwork().then(address => new EnsRegistry_1.EnsRegistry(ens.eth, address));
    }
    /**
     * Returns the address of the owner of an ENS name.
     *
     * @method owner
     * @param {string} name
     * @param {function} callback
     * @return {Promise<any>}
     */
    owner(name) {
        return tslib_1.__awaiter(this, void 0, void 0, function* () {
            const contract = yield this.contract;
            return yield contract.methods.owner(namehash_1.namehash(name)).call();
        });
    }
    /**
     * Returns the resolver contract associated with a name.
     *
     * @method resolver
     * @param {string} name
     * @return {Promise<Contract>}
     */
    resolver(name) {
        return tslib_1.__awaiter(this, void 0, void 0, function* () {
            const contract = yield this.contract;
            const address = yield contract.methods.resolver(namehash_1.namehash(name)).call();
            return new EnsResolver_1.EnsResolver(this.ens.eth, address);
        });
    }
}
exports.Registry = Registry;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicmVnaXN0cnkuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi9zcmMvZW5zL3JlZ2lzdHJ5L3JlZ2lzdHJ5LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQTs7Ozs7Ozs7Ozs7Ozs7O0VBZUU7OztBQUdGLHlDQUFzQztBQUN0QywwREFBdUQ7QUFDdkQsMERBQXVEO0FBRXZEOzs7Ozs7R0FNRztBQUNILE1BQWEsUUFBUTtJQUduQixZQUFvQixHQUFRO1FBQVIsUUFBRyxHQUFILEdBQUcsQ0FBSztRQUMxQixJQUFJLENBQUMsUUFBUSxHQUFHLEdBQUcsQ0FBQyxZQUFZLEVBQUUsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLEVBQUUsQ0FBQyxJQUFJLHlCQUFXLENBQUMsR0FBRyxDQUFDLEdBQUcsRUFBRSxPQUFPLENBQUMsQ0FBQyxDQUFDO0lBQ3hGLENBQUM7SUFFRDs7Ozs7OztPQU9HO0lBQ0csS0FBSyxDQUFDLElBQVk7O1lBQ3RCLE1BQU0sUUFBUSxHQUFHLE1BQU0sSUFBSSxDQUFDLFFBQVEsQ0FBQztZQUNyQyxPQUFPLE1BQU0sUUFBUSxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsbUJBQVEsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLElBQUksRUFBRSxDQUFDO1FBQzdELENBQUM7S0FBQTtJQUVEOzs7Ozs7T0FNRztJQUNHLFFBQVEsQ0FBQyxJQUFZOztZQUN6QixNQUFNLFFBQVEsR0FBRyxNQUFNLElBQUksQ0FBQyxRQUFRLENBQUM7WUFDckMsTUFBTSxPQUFPLEdBQUcsTUFBTSxRQUFRLENBQUMsT0FBTyxDQUFDLFFBQVEsQ0FBQyxtQkFBUSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsSUFBSSxFQUFFLENBQUM7WUFDdkUsT0FBTyxJQUFJLHlCQUFXLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxHQUFHLEVBQUUsT0FBTyxDQUFDLENBQUM7UUFDaEQsQ0FBQztLQUFBO0NBQ0Y7QUFoQ0QsNEJBZ0NDIn0=